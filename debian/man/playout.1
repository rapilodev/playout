.\" Automatically generated by Pandoc 3.1.3
.\"
.\" Define V font for inline verbatim, using C font in formats
.\" that render this, and otherwise B font.
.ie "\f[CB]x\f[]"x" \{\
. ftr V B
. ftr VI BI
. ftr VB B
. ftr VBI BI
.\}
.el \{\
. ftr V CR
. ftr VI CI
. ftr VB CB
. ftr VBI CBI
.\}
.TH "" "" "" "" ""
.hy
.SH PLAYOUT(1)
.SS NAME
.PP
playout - audio playout scheduler
.SS SYNOPSIS
.IP
.nf
\f[C]
systemctl start|stop|restart|status playout
\f[R]
.fi
.SS DESCRIPTION
.PP
Playout is an automated audio scheduler that plays audio files at
specified times based on directory structure.
Files are placed in directories named by date and time, and playout
automatically plays them at the scheduled moment.
.SS DIRECTORY STRUCTURE
.PP
Audio files must be placed in directories following this format:
.IP
.nf
\f[C]
<media_path>/YYYY/MM/DD/HH-MM/audio_file.mp3
\f[R]
.fi
.PP
Where: - \f[B]YYYY\f[R] - Four-digit year (2025) - \f[B]MM\f[R] -
Two-digit month (01-12) - \f[B]DD\f[R] - Two-digit day (01-31) -
\f[B]HH-MM\f[R] - Hour and minute in 24-hour format (00-00 to 23-59)
.PP
Example:
.IP
.nf
\f[C]
/var/playout/media/2025/12/15/14-30/show.mp3
\f[R]
.fi
.PP
This file will play at 14:30 on December 15, 2025.
.SS BEHAVIOR
.PP
\f[B]Playback Rules\f[R] - First file found alphabetically in time slot
directory is played - Playback starts precisely at scheduled time -
Current file stops when next schedule begins - No audio plays if
directory is empty
.PP
\f[B]File Discovery\f[R] - Media directory scanned continuously - New
files detected automatically - No service restart required
.PP
\f[B]Resume on Interruption\f[R] - Service calculates elapsed time on
restart - Resumes playback from current position - Prevents content
repetition or gaps
.PP
\f[B]Streams\f[R] - Create \f[V].stream\f[R] file with URL and DURATION
- Format: \f[V]URL: http://example.com/stream.mp3\f[R] and
\f[V]DURATION: 3600\f[R]
.SS INSTALLATION
.IP
.nf
\f[C]
dpkg -i playout_<version>.deb
systemctl enable playout
systemctl start playout
\f[R]
.fi
.SS CONFIGURATION
.PP
Configuration file: \f[V]/etc/playout/playout.conf\f[R]
.PP
\f[B]Essential Options:\f[R]
.IP
.nf
\f[C]
media_path = /var/playout/media
log_file = /var/log/playout/playout.log
log_level = info
scan_interval = 10
\f[R]
.fi
.PP
\f[B]Optional:\f[R]
.IP
.nf
\f[C]
upload_enabled = 0|1
upload_url = http://server/api/schedule
rms_enabled = 0|1
\f[R]
.fi
.PP
Apply changes:
.IP
.nf
\f[C]
systemctl restart playout
\f[R]
.fi
.SS FILES
.IP
.nf
\f[C]
/etc/playout/playout.conf          Configuration file
/var/playout/media/                Media directory
/var/log/playout/playout.log       Log file
/etc/logrotate.d/playout           Log rotation config
\f[R]
.fi
.SS SERVICE MANAGEMENT
.IP
.nf
\f[C]
systemctl status playout           # Check status
systemctl start playout            # Start service
systemctl stop playout             # Stop service
systemctl restart playout          # Restart service
systemctl enable playout           # Enable autostart
systemctl disable playout          # Disable autostart
\f[R]
.fi
.SS MONITORING
.PP
View logs:
.IP
.nf
\f[C]
tail -f /var/log/playout/playout.log
journalctl -u playout -f
\f[R]
.fi
.PP
Logs contain: - Playback start/stop events - File not found warnings -
Resume operations - Service status changes
.SS EXAMPLES
.PP
\f[B]Schedule daily morning show:\f[R]
.IP
.nf
\f[C]
mkdir -p /var/playout/media/2025/12/15/06-00
cp morning_show.mp3 /var/playout/media/2025/12/15/06-00/
chown -R playout:playout /var/playout/media/2025/12/15
\f[R]
.fi
.PP
\f[B]Schedule hourly news:\f[R]
.IP
.nf
\f[C]
mkdir -p /var/playout/media/2025/12/15/{08-00,09-00,10-00}
cp news.mp3 /var/playout/media/2025/12/15/08-00/
cp news.mp3 /var/playout/media/2025/12/15/09-00/
cp news.mp3 /var/playout/media/2025/12/15/10-00/
\f[R]
.fi
.PP
\f[B]Schedule stream:\f[R]
.IP
.nf
\f[C]
mkdir -p /var/playout/media/2025/12/15/20-00
cat > /var/playout/media/2025/12/15/20-00/concert.stream << EOF
URL: http://radio.example.com/live.mp3
DURATION: 7200
EOF
\f[R]
.fi
.SS TROUBLESHOOTING
.PP
\f[B]Service won\[cq]t start:\f[R]
.IP
.nf
\f[C]
systemctl status playout
journalctl -u playout -n 50
\f[R]
.fi
.PP
\f[B]File not found:\f[R] - Verify directory structure
(YYYY/MM/DD/HH-MM) - Check system time: \f[V]date\f[R] - Verify
permissions: \f[V]ls -la /var/playout/media/\f[R]
.PP
\f[B]Wrong timing:\f[R] - Check timezone: \f[V]timedatectl\f[R] - Sync
system clock: \f[V]systemctl start systemd-timesyncd\f[R]
.PP
\f[B]Fix permissions:\f[R]
.IP
.nf
\f[C]
chown -R playout:playout /var/playout/media/
chmod -R 755 /var/playout/media/
\f[R]
.fi
.SS SUPPORTED FORMATS
.PP
Any format supported by ffmpeg: MP3, WAV, OGG, FLAC, AAC, M4A
.SS SEE ALSO
.PP
systemctl(1), journalctl(1), ffmpeg(1)
.SS AUTHOR
.PP
rapilodev
.SS REPOSITORY
.PP
https://github.com/rapilodev/playout
.SS LICENSE
.PP
GPL-3.0
